<html>
<head><title>Offringa's RFI software</title></head>
<body>
<p><a href="http://www.astro.rug.nl/~offringa/">Offringa</a>-&gt;<a href="index.html">RFI software</a>-&gt;RFI gui tutorial</p>
<h2>RFI GUI tutorial</h2>
<h3>Introduction</h3>
<p>The GUI of the AOTools is aimed at analysing data of single baselines
at a time. Especially for problems related to RFI, this should be a very
handy tool. The tool can do quite advanced data manipulation, but many
of the advanced tricks are undocumented and/or somewhat hidden in the
tool. The tool (including its documentation) is very much a work in progress.</p>
<p>This tutorial was written for the SVN version of 2011-01-21.</p>
<h3>Starting the tool</h3>
<p>Once you have installed the GUI, you should be able to start the GUI with
"rfigui". If you are running the GUI remotely on a different machine, make
sure you have your x server forwarded (either with ssh -X or ssh -Y depending
on Mac/Linux). On the LOFAR CEP cluster, you have to import the LofIm
environment with "use LofIm".</p>
<img align="right" src="img/rfigui-mainwindow.png" />
<h3>Opening a measurement set</h3>
<p>After starting the GUI, the main window will appear (displayed on the
right), from which most actions will be performed. To start working,
open a measurement set. RFI gui has been written around the AIPS++/CASA 
measurement set format (directories with extension .MS), and works best
with those formats. There is some limited
support for opening UV FITS files (extension .uvfits) and raw RTCP output
files (extension .raw).</p>
<img align="left" src="img/rfigui-openms.png" />
<p>To open a measurement set, select "Open directory" from the
"File" menu. For opening a uv fits or raw file, select "Open file" instead.
In general, RFI gui will never write changes to the measurement set;
all options in the menu will be executed in memory, with the exception
of custom made strategies.<br clear="left" /></p>
<img align="right" src="img/rfigui-openoptions.png" />
<p>After selecting your measurement set (abbrev. MS),
a pop-up window will appear (displayed on the right) with
settings for opening the set. In most cases, you'll want to keep the default
settings.</p>
<p>The settings are:</p>
<ul>
<li>Column: the column to read from the MS. "Residual" will subtract the
model data from the original data ("DATA" column).</li>
<li>Polarisation: which polarisations to read. By default, will read four
polarisations. In RFI gui, the gui will always refer to the polarisations
as if they are orthogonal, thus as if XX, XY, YX and YY are in the set.
However, if the MS contains circular polarisations, the
XX polarisation will actually be LL, XY will be LR, etc. When data contains
four polarisation, the GUI will often visualize the Stokes I values by
calculating (XX + YY) (or (LL + RR) in the case of circular polarisation).
For flagging, it often matters little in which coordinate system the
polarisations are represented, as long as all information is being used.</li>
<li>Indirect read options: Enables reordering of the measurement set,
as described on the <a href="reading-mode.html">Reading mode page</a>.
Normally you don't want this, because it takes a long time to reorder the
entire set. Once reordered, it is much faster to read a single baseline.
Therefore, if you intent to look at many (/all) baselines in the
set, this is more efficient.</li>
<li>Read UVW: Enables reading of the UVW values. Some custom strategy
actions need these. Since these values are not reordered, reading them might
take a little bit of time in indirect reading mode. When processing sets
with >1000 baselines, this might be as much as several seconds per baseline.
</li>
<li>Partitioning: Can split baselines into several pieces. Only works in
direct reading mode. Used to speed up reading so that smaller pieces at
a time can be inspected more quickly. Bit of an artifact of previous
issues, and not recommended to be used.</li>
</ul>
<p>After you press the "Open" button, the set will be opened and the
first baseline in the set will be read. This might take some time.</p>
<br clear="all" /></p>
<h3>Selecting a baseline</h3>
<p>The first baseline in a MS set is often an autocorrelation. These have often
been flagged entirely by the observatory, and you might therefore see a
large purple window appear after opening a MS. </p>
<p>There are two options for going to a different baselines:</p>
<ol>
<li><img align="left" src="img/rfigui-goto.png" /><img align="right" src="img/rfigui-gotowindow.png" />
Select "Go to..." from the "Go" menu. A window appears to select a baseline.
The image on the right shows how the "Go to" window might look like when
working with WSRT data.
By default, your current baseline will be
selected (versions < 2011-01-21 won't do this). Select your desired baseline
and press "Load" to load the baseline. Once again, that might take time.<br clear="left" />
</li>
<li>By pressing the toolbar "Next" and "Previous" you can iterate quickly over
baselines in the MS. The order in which will be iterated depends on the order
they are stored in the MS (to be more exactly; the order in which the first
time step has been stored in the set). Directly after loading a new set,
the status bar in the bottom will show the baseline (if you have not moved
with the mouse over the time frequency canvas).</li><br clear="all" />
</ol>
<h3>The main window</h3>
<img align="right" src="img/rfigui-mainwindow-loaded.png" />
<p>Once the loading of the data is finished, you should see your baseline
in the main window, along with the axes: frequency will be displayed
vertically, time horizontally. To the right is the window displayed with a
WSRT measurement open.</p>
<p>If your set has already been flagged, you should see the flags marked
in fuchsia.
As you can see on the right, the WSRT set has been flagged already.
The "original flags" and "alternative flag" buttons turn respectively
the fuchsia and the yellow flag markings on and off. When a new baseline is
loaded, the yellow and fuchsia flags are the same, however, once you start
executing strategies, the yellow ("alternative") flags will show the flags
produced by the flagger.<br clear="right" /></p>
<img align="right" src="img/rfigui-plotmenu.png" />
<p>The "plot" menu houses a lot of plotting operations, such as plotting
the distribution, the bandpass and time vs. amplitude. These options require
gnuplot, a pdf viewer and Ghostscript. If they don't work, check the
<a href="faq.html">FAQ page</a> on that issue. All options always operate
on the currently visible data. The plotting operations will also take
in account flags, and not use them to draw the graph if appropriate, if
marking of the flags is enabled (if both original and alternate flags are
displayed, they will be combined).</p>
<p>The plot menu also houses a quick imager described later.</p>
<h3>Imaging capabilities</h3>
<p>Imaging of the currently selected
data can be done with "Set and show image plan" in the Plot menu. A window
appears where you can switch between the UV plane and the imaging plane. This
action is actually a short cut for four actions: (1) pressing
"Show image plane"; (2) pressing "Clear" in the image plane;
(3) pressing "Add to image plane" in the Plot menu of the main window; and (4)
pressing "Apply weights" in the image window. The first action is trivial,
the others will be described below.</p>
<ul>
<li>The clear button in the image plane window sets the current image to
zero and sets the currently associated weights to zero.</li>
<li>The apply weights button in the image plane window divides each pixel
in the currently constructed uv plane
by the number of a sample was gridded on that pixel (updating both the
UV plane and the image plane). Until you have pressed this button, the image
plane is not always shown. Once you have pressed this button, you should
not add new data to the uv plane, as you would weight this new data
different then the previously added data. </li>
<li>The "Add to image plane" menu item on the main window will grid and add
the currently visible data to the uv plane, and update the weights
accordingly. If you would press  </li>
</p>
</body>
</html>


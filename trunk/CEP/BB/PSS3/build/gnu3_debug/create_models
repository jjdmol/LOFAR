#!/bin/ksh



for n in 1 2 3 4 5 6 
  do
    	tablename=meqmodel$n
    	echo ${tablename}

	echo " " > sql_create
	echo "drop table ${tablename};" >> sql_create
	echo "drop table ${tablename}def;" >> sql_create
	echo "create table ${tablename}def (ObjID bigint not null unique primary key, Owner bigint not null, VersionNr integer not null, NAME text, SRCNR integer, STATNR integer, VALUES00 double precision, VALUES text, SIM_VALUES text, SIM_PERT text, TIME0 double precision, FREQ0 double precision, NORMALIZED smallint, SOLVABLE text, DIFF double precision, DIFF_REL smallint);" >> sql_create
	echo "create trigger ${tablename}def_updateversionnr before insert on ${tablename}def for each row execute procedure updateversionnr();" >> sql_create
	echo "create table ${tablename} (ObjID bigint not null unique primary key, Owner bigint not null, VersionNr integer not null, NAME text, SRCNR integer, STATNR integer, VALUES00 double precision, VALUES text, SIM_VALUES text, SIM_PERT text, TIME0 double precision, FREQ0 double precision, NORMALIZED smallint, SOLVABLE text, DIFF double precision, DIFF_REL smallint, STARTTIME double precision, ENDTIME double precision, STARTFREQ double precision, ENDFREQ double precision);" >> sql_create
	echo "create trigger ${tablename}_updateversionnr before insert on ${tablename} for each row execute procedure updateversionnr();" >> sql_create
	echo "\q" >> sql_create
	cat sql_create
	psql -h dop50 -U postgres meijeren < sql_create

	echo "connect db='meijeren', dbtype='postgres', tablename='${tablename}'" > fill.parmdb
	echo "adddef frot values=0" >> fill.parmdb
	echo "adddef drot values=0" >> fill.parmdb
	echo "adddef dell values=0" >> fill.parmdb
	echo "adddef gain.11 values=1" >> fill.parmdb
	echo "adddef gain.22 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR1.CP1 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR1.CP2 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR1.CP3 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR2.CP1 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR2.CP2 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR2.CP3 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR5.CP1 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR5.CP2 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR5.CP3 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR9.CP1 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR9.CP2 values=1" >> fill.parmdb
	echo "adddef EJ11.real.SR9.CP3 values=1" >> fill.parmdb
	echo "adddef EJ11.real values=1" >> fill.parmdb
	echo "adddef EJ12.real values=0" >> fill.parmdb
	echo "adddef EJ21.real values=0" >> fill.parmdb
	echo "adddef EJ22.real values=1" >> fill.parmdb
	echo "adddef EJ11.imag values=1" >> fill.parmdb
	echo "adddef EJ12.imag values=0" >> fill.parmdb
	echo "adddef EJ21.imag values=0" >> fill.parmdb
	echo "adddef EJ22.imag values=1" >> fill.parmdb
	echo "quit" >> fill.parmdb
	cat fill.parmdb
	../../../../CPA/PSS3/MNS/build/gnu3_debug/src/parmdb < fill.parmdb

    	tablename=skymodel$n
    	echo ${tablename}

	echo " " > sql_create
	echo "drop table ${tablename};" >> sql_create
	echo "drop table ${tablename}def;" >> sql_create
	echo "create table ${tablename}def (ObjID bigint not null unique primary key, Owner bigint not null, VersionNr integer not null, NAME text, SRCNR integer, STATNR integer, VALUES00 double precision, VALUES text, SIM_VALUES text, SIM_PERT text, TIME0 double precision, FREQ0 double precision, NORMALIZED smallint, SOLVABLE text, DIFF double precision, DIFF_REL smallint);" >> sql_create
	echo "create trigger ${tablename}def_updateversionnr before insert on ${tablename}def for each row execute procedure updateversionnr();" >> sql_create
	echo "create table ${tablename} (ObjID bigint not null unique primary key, Owner bigint not null, VersionNr integer not null, NAME text, SRCNR integer, STATNR integer, VALUES00 double precision, VALUES text, SIM_VALUES text, SIM_PERT text, TIME0 double precision, FREQ0 double precision, NORMALIZED smallint, SOLVABLE text, DIFF double precision, DIFF_REL smallint, STARTTIME double precision, ENDTIME double precision, STARTFREQ double precision, ENDFREQ double precision);" >> sql_create
	echo "create trigger ${tablename}_updateversionnr before insert on ${tablename} for each row execute procedure updateversionnr();" >> sql_create
	echo "\q" >> sql_create
	cat sql_create
	psql -h dop50 -U postgres meijeren < sql_create

	echo "connect db='meijeren', dbtype='postgres', tablename='${tablename}'" > fill.parmdb
    	echo "adddef RA.CP1 values=10:26:35.0" >> fill.parmdb
    	echo "adddef DEC.CP1 values=26.0.0.0" >> fill.parmdb
    	echo "adddef StokesI.CP1 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP1 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP1 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP1 values=0" >> fill.parmdb
    	echo "adddef RA.CP2 values=10:26:35.4" >> fill.parmdb
    	echo "adddef DEC.CP2 values=26.0.21.0" >> fill.parmdb
    	echo "adddef StokesI.CP2 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP2 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP2 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP2 values=0" >> fill.parmdb
    	echo "adddef RA.CP3 values=10:26:37.1" >> fill.parmdb
    	echo "adddef DEC.CP3 values=25.59.49.0" >> fill.parmdb
    	echo "adddef StokesI.CP3 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP3 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP3 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP3 values=0" >> fill.parmdb

    	echo "adddef RA.CP4 values=10:26:34.8" >> fill.parmdb
    	echo "adddef DEC.CP4 values=25.59.39.0" >> fill.parmdb
    	echo "adddef StokesI.CP4 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP4 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP4 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP4 values=0" >> fill.parmdb

    	echo "adddef RA.CP5 values=10:26:36.3" >> fill.parmdb
    	echo "adddef DEC.CP5 values=26.0.11.0" >> fill.parmdb
    	echo "adddef StokesI.CP5 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP5 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP5 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP5 values=0" >> fill.parmdb

    	echo "adddef RA.CP6 values=10:26:36.1" >> fill.parmdb
    	echo "adddef DEC.CP6 values=25.59.59.0" >> fill.parmdb
    	echo "adddef StokesI.CP6 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP6 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP6 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP6 values=0" >> fill.parmdb

    	echo "adddef RA.CP7 values=10:26:37.6" >> fill.parmdb
    	echo "adddef DEC.CP7 values=25.59.56.0" >> fill.parmdb
    	echo "adddef StokesI.CP7 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP7 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP7 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP7 values=0" >> fill.parmdb

    	echo "adddef RA.CP8 values=10:26:34.5" >> fill.parmdb
    	echo "adddef DEC.CP8 values=25.59.51." >> fill.parmdb
    	echo "adddef StokesI.CP8 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP8 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP8 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP8 values=0" >> fill.parmdb

    	echo "adddef RA.CP9 values=10:26:36.6" >> fill.parmdb
    	echo "adddef DEC.CP9 values=26.0.15.5" >> fill.parmdb
    	echo "adddef StokesI.CP9 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP9 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP9 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP9 values=0" >> fill.parmdb

    	echo "adddef RA.CP10 values=10:26:35.6" >> fill.parmdb
    	echo "adddef DEC.CP10 values=26.0.0.0" >> fill.parmdb
    	echo "adddef StokesI.CP10 values=1.0" >> fill.parmdb
    	echo "adddef StokesQ.CP10 values=0 " >> fill.parmdb
    	echo "adddef StokesU.CP10 values=0 " >> fill.parmdb
    	echo "adddef StokesV.CP10 values=0" >> fill.parmdb
	echo "quit" >> fill.parmdb
	cat fill.parmdb
	../../../../CPA/PSS3/MNS/build/gnu3_debug/src/parmdb < fill.parmdb

done


#create the bb tables
echo " " > sql_create
echo "drop table bbsolutions;" >> sql_create
echo "drop table bbworkorders;" >> sql_create
echo "create table BBWorkOrders (ObjId BIGINT NOT NULL UNIQUE PRIMARY KEY, Owner BIGINT NOT NULL, VersionNr INTEGER NOT NULL, ID INTEGER, TAG INTEGER, SEQNR BIGINT, DATA TEXT, WOID INTEGER, STATUS INTEGER, KSTYPE TEXT, STRATEGYNO INTEGER, NOSTARTSOLS INTEGER, ARGSSIZE INTEGER, NUMBEROFPARAM INTEGER);" >> sql_create
echo "CREATE TRIGGER BBWorkOrdersUpdateVersionNr BEFORE INSERT OR UPDATE ON BBWorkOrders FOR EACH ROW EXECUTE PROCEDURE UpdateVersionNr();" >> sql_create
echo "create table BBSolutions (ObjId BIGINT NOT NULL UNIQUE PRIMARY KEY, Owner BIGINT NOT NULL, VersionNr INTEGER NOT NULL, ID INTEGER, TAG INTEGER, SEQNR BIGINT, DATA TEXT, BBID INTEGER, WOID INTEGER, ITERATION INTEGER, FIT DOUBLE PRECISION, MU DOUBLE PRECISION, STDDEV DOUBLE PRECISION, CHI DOUBLE PRECISION, NUMBEROFPARAM INTEGER);" >> sql_create
echo "CREATE TRIGGER BBSolutionsUpdateVersionNr BEFORE INSERT OR UPDATE ON BBSolutions FOR EACH ROW EXECUTE PROCEDURE UpdateVersionNr();" >> sql_create
echo "\q" >> sql_create
cat sql_create
psql -h dop50 -U postgres meijeren < sql_create

#!/bin/sh
# this script must be called with nriter and usernm

if [ "$#" != "2" ]; then
 echo "not the correct number of parameters"
 exit 1
fi

niter=$1
usernm=$2

. ./initparms

# Do testEJ11PolynSolveEJ11
echo ""
echo "Doing testEJ11PolynSolveEJ11"

echo "  Generating parm tables ..."
# use functions in initparms to initialize parmtables
beginParmdbInputFile "dbtype='aips', user='$usernm', tablename='demo3p-1'"
makeMeq
makeEJ11Poly
perturbEJ11realPolyn
applyfile

beginParmdbInputFile "dbtype='aips', user='$usernm', tablename='demo3_gsm-1'"
makeGsm
applyfile

echo "  Preparing BlackBoard ..."
time ./clearBB -user $usernm
echo "  Starting solve ..."
time ./tBBS2 tBBS2.testEJ11PolynSolveEJ11 $niter $usernm >& testEJ11PolynSolveEJ11.out

#prepare pre settings:

// set base dir where LOFAR starts
export LOFARBASE=~
cd ${LOFARBASE}

export CLASSPATH=${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes:[pathto log4jloggerclasses]
export LD_LIBRARY_PATH=${LOFARBASE}/LOFAR/installed/gnu_debug/lib:/lib:/usr/lib:usr/local/lib
export JAVAHOME=/usr/local/jdk1.5.0_04/
export PATH=/usr/local/jdk1.5.0_04/bin:$PATH


#checkout the package from cvs:
cvs co LOFAR/SAS/OTB/jOTDB2

#go to 

cd ${LOFARBASE}LOFAR/SAS/OTB/jOTDB2/src/nl/astron/lofar/sas/otb/jotdb2

#build the java files:

javac -d ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes *.java

cd ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/src

# build the rmi stubs:

rmic -d ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes nl.astron.lofar.sas.otb.jotdb2.jConverterAdapter
rmic -d ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes nl.astron.lofar.sas.otb.jotdb2.jOTDBadapter
rmic -d ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes nl.astron.lofar.sas.otb.jotdb2.jTreeMaintenanceAdapter
rmic -d ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes nl.astron.lofar.sas.otb.jotdb2.jTreeValueAdapter


# in this case, to be able to use the jar file we need to include the 
# external packages in the same jar file:

cd ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/classes


jar xvf /usr/local/netbeans-4.1/ide5/modules/ext/AbsoluteLayout.jar
jar xvf /home/coolen/logging-log4j-1.2.13/dist/lib/log4j-1.2.13.jar

#place the Manifest file here
cp ../../src/nl/astron/lofar/sas/otb/jotdb2/Manifest.txt .

# build the jarfile
jar -cvfm ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/build/lib/jotdb2.jar ../../src/nl/astron/lofar/sas/otb/jotdb2/Manifest.txt *


#the .h files in include and the .cc files in src can be build by rub the normal way.

# the jOTDB2.log_prop should be placed somewhere ?in the directory wher you run the files


#The test directory:


cd ${LOFARBASE}/LOFAR/SAS/OTB/jOTDB2/test
javac *.java

#to run the tests

java tConnection
java tConverter
java tRemoteConnection
java tRemoteConverter
java tTreeMaintenance

#the last 3 should have the server running also....

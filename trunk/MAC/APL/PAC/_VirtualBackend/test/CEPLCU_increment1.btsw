//
//  CEPLCU_increment1.btsw: Testscript for increment 1 of the CEPLCU software.
//
//  Copyright (C) 2005
//  ASTRON (Netherlands Foundation for Research in Astronomy)
//  P.O.Box 2, 7990 AA Dwingeloo, The Netherlands, seg@astron.nl
//
// ------------------------------------------------------------------------------
// Description:
//
//
//
// ------------------------------------------------------------------------------

[statemachines]

Statemachine_VBStartDaemonClient (vbsd_scheduled) =
{
// ------------------------------------------------------------------------------
  s000  : 	F_STARTDAEMON_SCHEDULE 	(0x00000007, "VB1", "VB1.param" )    ; s010.			// send schedule VB1
  s010  :		E_STARTDAEMON_SCHEDULED ( )
  					R_SIG(vbsd_scheduled)              						; finish.		// wait for response

  finish : 	TERMINATE															; finish.
}

Statemachine_VirtualInstrument ( vbsd_scheduled) =
{
	s000   : 	E_LOGICALDEVICE_CONNECT   ( )				                  ; s001.
  s001	 : 	F_LOGICALDEVICE_CONNECTED ( 0x00000000 )								; s002.
  s002	 : 	E_LOGICALDEVICE_SCHEDULED ( )													
						E_LOGICALDEVICE_CLAIMED ()
						E_LOGICALDEVICE_PREPARED ()
						E_LOGICALDEVICE_SUSPENDED ()
						E_LOGICALDEVICE_RESUMED ()
						E_LOGICALDEVICE_RELEASED () 														; ready.
  ready  : 	S_SIG(vbsd_scheduled)			 														; finish.
  finish : 	TERMINATE 																							; finish.
}

[testscript]
VAR     vbsd_scheduled.

COM1 :  Statemachine_VBStartDaemonClient (vbsd_scheduled).

COM2 :  Statemachine_VirtualInstrument (vbsd_scheduled).

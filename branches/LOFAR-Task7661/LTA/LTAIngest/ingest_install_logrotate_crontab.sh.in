#!/bin/bash

#directory for various ltaingest config and state files
LTAINGEST_CFG_DIR=@LTAINGEST_CFG_DIR@

#logrotate command to be executed for ingest
command="logrotate $LTAINGEST_CFG_DIR/ingest_logrotate.conf -s $LTAINGEST_CFG_DIR/ingest_logrotate.state >> /dev/null 2>&1"

#ingest logrotate line for crontab 
job="@daily $command"

#check if job is not installed in crontab yet, if so install it.
cat <(fgrep -i -v "$command" <(crontab -l)) <(echo "$job") | crontab -

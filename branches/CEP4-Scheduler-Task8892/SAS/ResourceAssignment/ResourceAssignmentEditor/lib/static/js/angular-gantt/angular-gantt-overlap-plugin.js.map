{"version":3,"sources":["../src/plugins/overlap.js","../.tmp/generated/plugins/overlap/html2js.js"],"names":[],"mappings":"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","file":"angular-gantt-overlap-plugin.js","sourcesContent":["(function(){\n    'use strict';\n    angular.module('gantt.overlap', ['gantt', 'gantt.overlap.templates']).directive('ganttOverlap', ['moment',function(moment) {\n        return {\n            restrict: 'E',\n            require: '^gantt',\n            scope: {\n                enabled: '=?'\n            },\n            link: function(scope, element, attrs, ganttCtrl) {\n                var api = ganttCtrl.gantt.api;\n\n                if (scope.enabled === undefined) {\n                    scope.enabled = true;\n                }\n\n                function getStartEnd(task) {\n                    var start, end;\n\n                    if (task.model.from.isBefore(task.model.to)) {\n                        start = task.model.from;\n                        end = task.model.to;\n                    } else {\n                        start = task.model.to;\n                        end = task.model.from;\n                    }\n\n                    return [start, end];\n                }\n\n                function getRange(task) {\n                    var startEnd = getStartEnd(task);\n                    return moment().range(startEnd[0], startEnd[1]);\n                }\n\n                function handleTaskOverlap(overlapsList, task) {\n                    if (!(task.model.id in overlapsList)) {\n                        task.$element.addClass('gantt-task-overlaps');\n                        overlapsList[task.model.id] = task;\n                    }\n                }\n\n                function handleTaskNonOverlaps(overlapsList, allTasks) {\n                    for(var i=0, l=allTasks.length; i<l; i++) {\n                        var task = allTasks[i];\n                        if (!(task.model.id in overlapsList)) {\n                            task.$element.removeClass('gantt-task-overlaps');\n                        }\n                    }\n                }\n\n                function handleOverlaps(row) {\n                    // Tasks are sorted by start date when added to row\n                    var allTasks = row.tasks;\n                    var newOverlapsTasks = {};\n\n                    if (allTasks.length > 1) {\n                        var previousTask = allTasks[0];\n                        var previousRange = getRange(previousTask);\n\n                        for (var i = 1, l = allTasks.length; i < l; i++) {\n                            var task = allTasks[i];\n                            var range = getRange(task);\n\n                            if (range.overlaps(previousRange)) {\n                                handleTaskOverlap(newOverlapsTasks, task);\n                                handleTaskOverlap(newOverlapsTasks, previousTask);\n                            }\n\n                            if (previousTask.left+previousTask.width < task.left+task.width) {\n                                previousTask = task;\n                                previousRange = range;\n                            }\n                        }\n                    }\n\n                    handleTaskNonOverlaps(newOverlapsTasks, allTasks);\n                }\n\n                if (scope.enabled){\n                    api.tasks.on.change(scope, function(task) {\n                        handleOverlaps(task.row);\n                    });\n\n                    api.tasks.on.rowChange(scope, function(task, oldRow) {\n                        handleOverlaps(oldRow);\n                    });\n                }\n\n            }\n        };\n    }]);\n}());\n\n","angular.module('gantt.overlap.templates', []).run(['$templateCache', function($templateCache) {\n\n}]);\n"]}
V 10
1
LANG:1 9 VTControl
PANEL,114 67 699 849 N "_3DFace" 3
"$BFNAME"
"$SRGNAME"
"$VTNAME"
"main()
{
  addGlobal(\"currentSubband\", INT_VAR); // creation of the variable
  currentSubband=0;
}

" 0
 E E E E 1 -1 -1 0  10 80
""0  1
E "string buildSubbandsString()
{
  string subbands=\"\";
  int i;
  int subbandStart;
  int subbandEnd;
  getValue(\"SpinButtonSubbandStart\",\"text\",subbandStart);
  getValue(\"SpinButtonSubbandEnd\",\"text\",subbandEnd);

  if(subbandStart < 0)
    subbandStart=0;
  if(subbandStart > 127)
    subbandStart=127;
  if(subbandEnd<subbandStart)
    subbandEnd=subbandStart;

  SpinButtonSubbandStatistics.sbMinimum=subbandStart;
  SpinButtonSubbandStatistics.sbMaximum=subbandEnd;

  for(i=subbandStart;i<subbandEnd;i++)
  {
    subbands=subbands+i+\"|\";
  }
  subbands=subbands+i;
  return subbands;
}

EP_VTStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldVTStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_BFStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldBFStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_SRGStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldSRGStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0
 2
"CBRef""1"
"EClose"E
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
1
LANG:1 6 Layer1
2 0
"Text1"
""
1 10 80 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
1 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12 82 165 99
0 2 0 "s" 0 0 0 192 0 0  12 82 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 17 Virtual Telescope
2 1
"Text2"
""
1 10 110 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
2 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12 112 102 129
0 2 0 "s" 0 0 0 192 0 0  12 112 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 10 Beamformer
2 2
"Text3"
""
1 10 140 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
3 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12 142 138 159
0 2 0 "s" 0 0 0 192 0 0  12 142 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 14 Receptor Group
2 6
"Text4"
""
1 150 60 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
7 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 152 62 184 77
0 2 0 "s" 0 0 0 192 0 0  152 62 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 4 Name
2 7
"Text5"
""
1 250 60 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
8 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 252 62 294 77
0 2 0 "s" 0 0 0 192 0 0  252 62 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 6 Status
2 11
"Text6"
""
1 9 319 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
12 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12 489 75 504
0 2 0 "s" 0 0 0 192 0 0  12 489 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 20 Activation time from
2 13
"Text7"
""
1 244 312 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
14 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 253 489 267 504
0 2 0 "s" 0 0 0 192 0 0  253 489 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 2 to
2 15
"Text8"
""
1 9 214 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
16 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 10 260 108 275
0 2 0 "s" 0 0 0 192 0 0  10 260 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 9 Direction
2 17
"Text9"
""
1 -29 236 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
18 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 72 322 191 337
0 2 0 "s" 0 0 0 192 0 0  72 322 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Angle 1
2 19
"Text10"
""
1 -29 266 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
20 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 72 352 191 367
0 2 0 "s" 0 0 0 192 0 0  72 352 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Angle 2
2 21
"Text11"
""
1 9 254 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
22 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12 424 75 439
0 2 0 "s" 0 0 0 192 0 0  12 424 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 9 Frequency
2 23
"Text12"
""
1 9 290 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
24 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 13 459 132 474
0 2 0 "s" 0 0 0 192 0 0  13 459 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 24 Subband selection:  from
4 35
"Line1"
""
1 10 240 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
36 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 2 1 0 1 E  680 240 10 240
4 36
"Line2"
""
1 10 170 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
37 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 2 1 0 1 E  680 170 10 170
2 37
"Text15"
""
1 399 134 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
38 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 532 285 686 300
0 2 0 "s" 0 0 0 192 0 0  532 285 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 4 Type
2 38
"Text16"
""
1 399 164 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
39 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 532 315 707 330
0 2 0 "s" 0 0 0 192 0 0  532 315 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Angle 1
2 39
"Text17"
""
1 399 194 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
40 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 532 345 707 360
0 2 0 "s" 0 0 0 192 0 0  532 345 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Angle 2
2 50
"Text18"
""
1 10 10 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
51 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 12.31578947368421 12.31578947368421 447.6842105263158 42.42105263157895
0 2 0 "s" 0 0 0 64 0 0  12.31578947368421 12.31578947368421 1
1
LANG:1 58 -adobe-helvetica-bold-o-normal-*-*-240-75-75-*-*-iso8859-1
0
"" 1
LANG:1 25 Virtual Telescope Control
4 51
"Line4"
""
1 10 50 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
52 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 3 1 0 1 E  680 50 10 50
14 3
"TextFieldVTName"
""
1 149.1428571428571 80 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
4 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  148 78 240 105
2 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldVTName.text=$VTNAME;
}" 0
 E
14 4
"TextFieldBFName"
""
1 149.1428571428571 110 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
5 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  148 108 240 135
2 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldBFName.text=$BFNAME;
}" 0
 E
14 5
"TextFieldSRGName"
""
1 149.1428571428571 140 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
6 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  148 138 240 165
2 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldSRGName.text=$SRGNAME;
}" 0
 E
14 8
"TextFieldVTStatus"
""
1 249.2670807453416 80 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
9 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  248 78 350 105
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$VTNAME+\"_status.:_original.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_VTStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_status.:_original.._value\");
  }
}
" 0
 E
14 9
"TextFieldBFStatus"
""
1 249.2670807453416 110 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
10 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  248 108 350 135
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_status.:_original.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_BFStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_status.:_original.._value\");
  }
}
" 0
 E
14 10
"TextFieldSRGStatus"
""
1 249.2670807453416 140 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
11 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  248 138 350 165
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$SRGNAME+\"_status.:_original.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_SRGStatusChanged\",\"System1:PAC_\"+$SRGNAME+\"_status.:_original.._value\");
  }
}
" 0
 E
14 12
"TextFieldStartTime"
""
1 154.1801242236025 485 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
13 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  153 483 248 510
3 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldStartTime.text=\"0\";
}" 0
 E
14 14
"TextFieldStopTime"
""
1 264.3043478260869 485 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
15 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  263 483 368 510
3 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldStopTime.text=\"0\";
}" 0
 E
14 18
"TextFieldDirectionAngle1"
""
1 124.2422360248447 312 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
19 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  123 310 223 337
3 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldDirectionAngle1.text=\"0.0\";
}" 0
 E
14 20
"TextFieldDirectionAngle2"
""
1 124.2422360248447 342 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
21 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  123 340 223 367
3 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldDirectionAngle2.text=\"0.0\";
}" 0
 E
14 22
"TextFieldFrequency"
""
1 154.304347826087 422 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
23 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  153 420 258 447
3 "s" 0 0 0 0 0 -1  E "main()
{
  TextFieldFrequency.text=\"0.0\";
}" 0
 E
13 25
"ButtonSchedule"
""
1 150 180 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
26 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  148 178 242 204

T 
1
LANG:1 8 Schedule
"main()
{
dyn_errClass err;
  string subbands;
  string command;

  subbands=buildSubbandsString();

  command = \"SCHEDULE \" + SpinButtonScheduleId.text + \",VT,\"+
            TextFieldVTName.text + \",\" +
            TextFieldBFName.text + \",\" +
            TextFieldSRGName.text + \",\" +
            TextFieldStartTime.text + \",\" +
            TextFieldStopTime.text + \",\" +
            TextFieldFrequency.text + \",\" +
            subbands + \",\" +
            ComboBoxDirectionType.text + \",\" +
            TextFieldDirectionAngle1.text + \",\" +
            TextFieldDirectionAngle2.text;
           
  dpSetWait(\"System1:PAC_LogicalDeviceScheduler_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);

  delay(1);
  dpConnect(\"EP_VTStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_status.:_original.._value\");
  dpConnect(\"EP_BFStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_status.:_original.._value\");
}

" 0
 E E E
13 26
"ButtonCancel"
""
1 255 180 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
27 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  253 178 347 204

T 
1
LANG:1 6 Cancel
"main()
{
dyn_errClass err;
  string command;
  command = \"CANCEL \"+SpinButtonScheduleId.text;
           
  dpSetWait(\"System1:PAC_LogicalDeviceScheduler_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}
" 0
 E E E
13 28
"ButtonPrepareVT"
""
1 360 80 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
29 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  358 78 422 104

T 
1
LANG:1 7 Prepare
"main()
{
dyn_errClass err;
  string subbands;
  string command;

  subbands = buildSubbandsString();
  command = \"PREPARE \"+
            TextFieldStartTime.text + \",\" +
            TextFieldStopTime.text + \",\" +
            TextFieldFrequency.text + \",\" +
            subbands + \",\" +
            ComboBoxDirectionType.text + \",\" +
            TextFieldDirectionAngle1.text + \",\" +
            TextFieldDirectionAngle2.text;
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 29
"ButtonResumeVT"
""
1 430 80 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
30 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  428 78 492 104

T 
1
LANG:1 6 Resume
"main()
{
dyn_errClass err;
  string command;
  command = \"RESUME\";
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 30
"ButtonSuspendVT"
""
1 500 80 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
31 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  498 78 562 104

T 
1
LANG:1 7 Suspend
"main()
{
dyn_errClass err;
  string command;
  command = \"SUSPEND\";
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
14 40
"TextFieldCurrentDirectionType"
""
1 586.1801242236025 282 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
41 0 0 0 0 0
E E E
0
1
LANG:1 22 1=J2000, 2=AZEL, 3=LMN

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  585 280 680 307
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionType.:_online.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_DirectionTypeChanged\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionType.:_online.._value\");
  }
}

EP_DirectionTypeChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionType\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0
 E
14 41
"TextFieldCurrentDirectionAngle1"
""
1 586.1801242236025 312 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
42 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  585 310 680 337
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle1.:_online.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_DirectionAngle1Changed\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle1.:_online.._value\");
  }
}

EP_DirectionAngle1Changed(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionAngle1\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0
 E
14 42
"TextFieldCurrentDirectionAngle2"
""
1 586.1801242236025 342 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
43 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  585 340 680 367
2 "s" 0 0 0 0 0 -1  E "main()
{
dyn_errClass err;

  if( dpSubStr(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle2.:_online.._value\", DPSUB_DP_EL ) != \"\" )
  {
    dpConnect(\"EP_DirectionAngle2Changed\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle2.:_online.._value\");
  }
}

EP_DirectionAngle2Changed(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionAngle2\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0
 E
13 43
"ButtonPrepareBF"
""
1 360 110 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
44 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  358 108 422 134

T 
1
LANG:1 7 Prepare
"main()
{
dyn_errClass err;
  string subbands;
  string command;

  subbands = buildSubbandsString();
  command = \"PREPARE \"+
            TextFieldStartTime.text + \",\" +
            TextFieldStopTime.text + \",\" +
            TextFieldFrequency.text + \",\" +
            subbands + \",\" +
            ComboBoxDirectionType.text + \",\" +
            TextFieldDirectionAngle1.text + \",\" +
            TextFieldDirectionAngle2.text;
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 44
"ButtonResumeBF"
""
1 430 110 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
45 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  428 108 492 134

T 
1
LANG:1 6 Resume
"main()
{
dyn_errClass err;
  string command;
  command = \"RESUME\";
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 45
"ButtonSuspendBF"
""
1 500 110 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
46 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  498 108 562 134

T 
1
LANG:1 7 Suspend
"main()
{
dyn_errClass err;
  string command;
  command = \"SUSPEND\";
           
  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 46
"ButtonPrepareSRG"
""
1 360 140 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
47 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  358 138 422 164

T 
1
LANG:1 7 Prepare
"main()
{
dyn_errClass err;
  string command;
  command = \"PREPARE\";
           
  dpSetWait(\"System1:PAC_\"+$SRGNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 47
"ButtonResumeSRG"
""
1 430 140 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
48 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  428 138 492 164

T 
1
LANG:1 6 Resume
"main()
{
dyn_errClass err;
  string command;
  command = \"RESUME\";
           
  dpSetWait(\"System1:PAC_\"+$SRGNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
13 48
"ButtonSuspendSRG"
""
1 500 140 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
49 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  498 138 562 164

T 
1
LANG:1 7 Suspend
"main()
{
dyn_errClass err;
  string command;
  command = \"SUSPEND\";
           
  dpSetWait(\"System1:PAC_\"+$SRGNAME+\"_command.:_original.._value\", command);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}" 0
 E E E
22 52
"ComboBoxDirectionType"
""
1 123 250 E E E 1 E 1 E N {0,0,0} E N "_Window" E E
 E E
68 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  123 250 223 277
3
1
LANG:1 5 J2000

0
1
LANG:1 4 AZEL

0
1
LANG:1 3 LMN

1

E
E
E
 0 0
2 53
"Text1"
""
1 360 370 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
54 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 361 186 480 201
0 2 0 "s" 0 0 0 192 0 0  361 186 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 16 Scheduler status
14 54
"TextFieldSchedulerStatus"
""
1 472.608695652174 182 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
56 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  470 180 680 207
2 "s" 0 0 0 0 0 -1  "
" 0
 "main()
{
  EP_textFieldIn();
}

EP_textFieldIn()
{
dyn_errClass err;

  if( dpSubStr( \"System1:PAC_LogicalDeviceScheduler_status.:_original.._value\", DPSUB_DP_EL ) == \"\" )
  {
    setValue(\"\", \"color\", \"_dpdoesnotexist\");
    return;
  }

  dpConnect(\"EP_textFieldInCB\",\"System1:PAC_LogicalDeviceScheduler_status.:_original.._value\");
  err = getLastError();
  if (dynlen(err) > 0)
    setValue(\"\", \"color\", \"_dpdoesnotexist\");

}


EP_textFieldInCB(string dp, string sNewValue)
{
  string sOldValue=TextFieldSchedulerStatus.text;

  setValue(\"\", \"text\", dpValToString(dp, sNewValue, FALSE) );
  if(sNewValue==\"Claimed\")
  {
    dpConnect(\"EP_VTStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_status.:_original.._value\");
    dpConnect(\"EP_BFStatusChanged\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_status.:_original.._value\");
    dpConnect(\"EP_SRGStatusChanged\",\"System1:PAC_\"+$SRGNAME+\"_status.:_original.._value\");

    dpConnect(\"EP_DirectionTypeChanged\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionType.:_online.._value\");
    dpConnect(\"EP_DirectionAngle1Changed\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle1.:_online.._value\");
    dpConnect(\"EP_DirectionAngle2Changed\",\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle2.:_online.._value\");
    
  }
}
      
EP_VTStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldVTStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_BFStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldBFStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_SRGStatusChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldSRGStatus\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_DirectionTypeChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionType\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_DirectionAngle1Changed(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionAngle1\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_DirectionAngle2Changed(string dp, string sNewValue)
{
  setValue(\"TextFieldCurrentDirectionAngle2\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0
 E
13 56
"ButtonAdjustDirection"
""
1 125.1276595744682 372 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
60 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  123 370 223 396

T 
1
LANG:1 3 Set
"main()
{
dyn_errClass err;

  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionType.:_original.._value\",ComboBoxDirectionType.text);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);

  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle1.:_original.._value\",TextFieldDirectionAngle1.text);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);

  dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle2.:_original.._value\",TextFieldDirectionAngle2.text);
  err = getLastError();
  if (dynlen(err) > 0)
    errorDialog(err);
}
" 0
 E E E
13 57
"ButtonLoadSchedule"
""
1 150.5531914893617 209 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
62 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  148 207 268 233

T 
1
LANG:1 18 Schedule From File
E E E E
14 58
"TextFieldScheduleFile"
""
1 269 207 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
63 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  269 207 649 234
3 "s" 0 0 0 0 0 -1  E E E
13 60
"ButtonBrowse"
""
1 650.5744680851063 211.6923076923077 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
66 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  650 210 677 232

T 
1
LANG:1 3 ...
E E E E
21 61
"SpinButtonSubbandStart"
""
1 153 453 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
69 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  153 453 220 480
0

E
E
E

N 0 127 1 0 1 1
21 62
"SpinButtonSubbandEnd"
""
1 243 453 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
107 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  243 453 300 480
0

E
E
E

N 0 127 1 127 1 1
2 63
"Text7"
""
1 242 320 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
72 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 223 459 237 474
0 2 0 "s" 0 0 0 192 0 0  223 459 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 2 to
4 66
"Line1"
""
1 10 520 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
84 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 2 1 0 1 E  680 520 10 520
2 67
"Text12"
""
1 -237 476 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
86 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 13 534 132 549
0 2 0 "s" 0 0 0 192 0 0  13 534 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 22 Statistics for subband
21 68
"SpinButtonSubbandStatistics"
""
1 150 528 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
281 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  150 528 210 555
0

"main()
{
dyn_errClass err;

  string scope;
  string dpPowerX;
  string dpPowerY;
  time t;
  bool stopInitCheck=false;

  addGlobal(\"gDisconnectInitialHandlers\",BOOL_VAR);
  gDisconnectInitialHandlers=false;
  addGlobal(\"gCurrentSubband\", INT_VAR);

  while(!stopInitCheck)
  {  
    // wait for last subband in database
    getValue(\"\",\"sbMaximum\",gCurrentSubband);
    sprintf(scope,\"power%03d\",gCurrentSubband);
    dpPowerX=\"System1:PAC_BeamServer_\"+scope+\"_x.:_original.._value\";

    if( dpSubStr( dpPowerX, DPSUB_DP_EL ) == \"\" )
    {
      delay(1);
    }
    else
    {
      stopInitCheck=true; 

      getValue(\"\",\"sbMinimum\",gCurrentSubband);
      sprintf(scope,\"power%03d\",gCurrentSubband);
      dpPowerX=\"System1:PAC_BeamServer_\"+scope+\"_x.:_original.._value\";
      dpPowerY=\"System1:PAC_BeamServer_\"+scope+\"_y.:_original.._value\";

      dpConnect(\"EP_SubbandStatisticsPowerXChanged\",dpPowerX);
      dpConnect(\"EP_SubbandStatisticsPowerYChanged\",dpPowerY);
      dpConnect(\"EP_SubbandStatisticsLastBlockChanged\",\"System1:PAC_BeamServer_seqnr.:_original.._value\");

      t=getCurrentTime();
      TREND1.curveRemoveData(\"powerX\", t);
      TREND1.curveRemoveData(\"powerY\", t);
      TREND1.connectDirectly(\"powerX\", dpPowerX);
      TREND1.connectDirectly(\"powerY\", dpPowerY);
  
      dpConnect(\"EP_DisplaySubbandsPowerX\", 
        \"System1:PAC_BeamServer_power000_x.:_online.._value\",
        \"System1:PAC_BeamServer_power001_x.:_online.._value\",
        \"System1:PAC_BeamServer_power002_x.:_online.._value\",
        \"System1:PAC_BeamServer_power003_x.:_online.._value\",
        \"System1:PAC_BeamServer_power004_x.:_online.._value\",
        \"System1:PAC_BeamServer_power005_x.:_online.._value\",
        \"System1:PAC_BeamServer_power006_x.:_online.._value\",
        \"System1:PAC_BeamServer_power007_x.:_online.._value\",
        \"System1:PAC_BeamServer_power008_x.:_online.._value\",
        \"System1:PAC_BeamServer_power009_x.:_online.._value\",
        \"System1:PAC_BeamServer_power010_x.:_online.._value\",
        \"System1:PAC_BeamServer_power011_x.:_online.._value\",
        \"System1:PAC_BeamServer_power012_x.:_online.._value\",
        \"System1:PAC_BeamServer_power013_x.:_online.._value\",
        \"System1:PAC_BeamServer_power014_x.:_online.._value\",
        \"System1:PAC_BeamServer_power015_x.:_online.._value\");
      dpConnect(\"EP_DisplaySubbandsPowerY\", 
        \"System1:PAC_BeamServer_power000_y.:_online.._value\",
        \"System1:PAC_BeamServer_power001_y.:_online.._value\",
        \"System1:PAC_BeamServer_power002_y.:_online.._value\",
        \"System1:PAC_BeamServer_power003_y.:_online.._value\",
        \"System1:PAC_BeamServer_power004_y.:_online.._value\",
        \"System1:PAC_BeamServer_power005_y.:_online.._value\",
        \"System1:PAC_BeamServer_power006_y.:_online.._value\",
        \"System1:PAC_BeamServer_power007_y.:_online.._value\",
        \"System1:PAC_BeamServer_power008_y.:_online.._value\",
        \"System1:PAC_BeamServer_power009_y.:_online.._value\",
        \"System1:PAC_BeamServer_power010_y.:_online.._value\",
        \"System1:PAC_BeamServer_power011_y.:_online.._value\",
        \"System1:PAC_BeamServer_power012_y.:_online.._value\",
        \"System1:PAC_BeamServer_power013_y.:_online.._value\",
        \"System1:PAC_BeamServer_power014_y.:_online.._value\",
        \"System1:PAC_BeamServer_power015_y.:_online.._value\");
    }  
  }
}

EP_SubbandStatisticsPowerXChanged(string dp, string sNewValue)
{
  if(gDisconnectInitialHandlers)
  {
    string scope;
    string dpPowerX;
    // disconnect the current handlers
    sprintf(scope,\"power%03d\",currentSubband);
    dpPowerX=\"System1:PAC_BeamServer_\"+scope+\"_x.:_original.._value\";
    dpDisconnect(\"EP_SubbandStatisticsPowerXChanged\",dpPowerX);
  }
  else
  {
    setValue(\"TextFieldSubbandStatisticsPowerX\", \"text\", dpValToString(dp, sNewValue, FALSE) );
  }
}

EP_SubbandStatisticsPowerYChanged(string dp, string sNewValue)
{
  if(gDisconnectInitialHandlers)
  {
    string scope;
    string dpPowerY;
    // disconnect the current handlers
    sprintf(scope,\"power%03d\",currentSubband);
    dpPowerY=\"System1:PAC_BeamServer_\"+scope+\"_y.:_original.._value\";
    dpDisconnect(\"EP_SubbandStatisticsPowerYChanged\",dpPowerY);
  }
  else
  {
    setValue(\"TextFieldSubbandStatisticsPowerY\", \"text\", dpValToString(dp, sNewValue, FALSE) );
  }
}

EP_SubbandStatisticsLastBlockChanged(string dp, string sNewValue)
{
  if(gDisconnectInitialHandlers)
  {
    // disconnect the current handlers
    dpDisconnect(\"EP_SubbandStatisticsLastBlockChanged\",\"System1:PAC_BeamServer_seqnr.:_original.._value\");
  }
  else
  {
    setValue(\"TextFieldSubbandStatisticsLastBlock\", \"text\", dpValToString(dp, sNewValue, FALSE) );
  }
}

EP_DisplaySubbandsPowerX(
  string dpx0, float powerx0,
  string dpx1, float powerx1,
  string dpx2, float powerx2,
  string dpx3, float powerx3,
  string dpx4, float powerx4,
  string dpx5, float powerx5,
  string dpx6, float powerx6,
  string dpx7, float powerx7,
  string dpx8, float powerx8,
  string dpx9, float powerx9,
  string dpx10, float powerx10,
  string dpx11, float powerx11,
  string dpx12, float powerx12,
  string dpx13, float powerx13,
  string dpx14, float powerx14,
  string dpx15, float powerx15  )
{
  dyn_float df;
  
  df=makeDynFloat(
    powerx0,
    powerx1,
    powerx2,
    powerx3,
    powerx4,
    powerx5,
    powerx6,
    powerx7,
    powerx8,
    powerx9,
    powerx10,
    powerx11,
    powerx12,
    powerx13,
    powerx14,
    powerx15);

  setValue( \"BarTrendPowerX\", \"yRange\", dynMax(df));  
  setValue( \"BarTrendPowerX\", \"yStep\", dynMax(df)/10);  
  setValue( \"BarTrendPowerX\", \"data\", df);
  setValue( \"BarTrendPowerX\", \"flush\" );    
}

EP_DisplaySubbandsPowerY(
  string dpy0, float powery0,
  string dpy1, float powery1,
  string dpy2, float powery2,
  string dpy3, float powery3,
  string dpy4, float powery4,
  string dpy5, float powery5,
  string dpy6, float powery6,
  string dpy7, float powery7,
  string dpy8, float powery8,
  string dpy9, float powery9,
  string dpy10, float powery10,
  string dpy11, float powery11,
  string dpy12, float powery12,
  string dpy13, float powery13,
  string dpy14, float powery14,
  string dpy15, float powery15  )
{
  dyn_float df;
  
  df=makeDynFloat(
    powery0,
    powery1,
    powery2,
    powery3,
    powery4,
    powery5,
    powery6,
    powery7,
    powery8,
    powery9,
    powery10,
    powery11,
    powery12,
    powery13,
    powery14,
    powery15);

  setValue( \"BarTrendPowerY\", \"yRange\", dynMax(df));  
  setValue( \"BarTrendPowerY\", \"yStep\", dynMax(df)/10);  
  setValue( \"BarTrendPowerY\", \"data\", df);
  setValue( \"BarTrendPowerY\", \"flush\" );    
}

" 0

"main()
{
  string scope;
  string dpPowerX;
  string dpPowerY;
  time t;

  // disconnect the current handlers
  gDisconnectInitialHandlers=true;
  
  sprintf(scope,\"power%03d\",gCurrentSubband);
  dpPowerX=\"System1:PAC_BeamServer_\"+scope+\"_x.:_original.._value\";
  dpPowerY=\"System1:PAC_BeamServer_\"+scope+\"_y.:_original.._value\";

  dpDisconnect(\"EP_SubbandStatisticsPowerXChanged\",dpPowerX);
  dpDisconnect(\"EP_SubbandStatisticsPowerYChanged\",dpPowerY);
  dpDisconnect(\"EP_SubbandStatisticsLastBlockChanged\",\"System1:PAC_BeamServer_seqnr.:_original.._value\");
  
  getValue(\"\",\"text\",gCurrentSubband);
  sprintf(scope,\"power%03d\",gCurrentSubband);
  dpPowerX=\"System1:PAC_BeamServer_\"+scope+\"_x.:_original.._value\";
  dpPowerY=\"System1:PAC_BeamServer_\"+scope+\"_y.:_original.._value\";

  dpConnect(\"EP_SubbandStatisticsPowerXChanged\",dpPowerX);
  dpConnect(\"EP_SubbandStatisticsPowerYChanged\",dpPowerY);
  dpConnect(\"EP_SubbandStatisticsLastBlockChanged\",\"System1:PAC_BeamServer_seqnr.:_original.._value\");

  t=getCurrentTime();
  TREND1.curveRemoveData(\"powerX\", t);
  TREND1.curveRemoveData(\"powerY\", t);
  TREND1.connectDirectly(\"powerX\", dpPowerX);
  TREND1.connectDirectly(\"powerY\", dpPowerY);
}

EP_SubbandStatisticsPowerXChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldSubbandStatisticsPowerX\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_SubbandStatisticsPowerYChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldSubbandStatisticsPowerY\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

EP_SubbandStatisticsLastBlockChanged(string dp, string sNewValue)
{
  setValue(\"TextFieldSubbandStatisticsLastBlock\", \"text\", dpValToString(dp, sNewValue, FALSE) );
}

" 0

E

N 0 127 1 0 1 1
2 69
"Text9"
""
1 -460 335 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
92 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 42 565 161 580
0 2 0 "s" 0 0 0 192 0 0  42 565 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Power X
14 70
"TextFieldSubbandStatisticsPowerX"
""
1 107.304347826087 561 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
94 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  106 559 211 586
2 "s" 0 0 0 0 0 -1  E E E
2 71
"Text10"
""
1 -460 365 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
96 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 42 595 161 610
0 2 0 "s" 0 0 0 192 0 0  42 595 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 7 Power Y
14 72
"TextFieldSubbandStatisticsPowerY"
""
1 107.304347826087 591 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
98 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  106 589 211 616
2 "s" 0 0 0 0 0 -1  E E E
23 76
"TREND1"
""
1 220 529 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
352 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  220 529 640 670
5 E E E 1 107 N {0,0,0} 0 0 1 0 1 0 2 0 "powerX" "System1:PAC_BeamServer_power000_x." 0 2 0 0 1 "3 2 0.000000" "%x" 1 1 2 0 E
E
1 0 0 3 2
1
LANG:1 1 X
1
LANG:1 1 ?
1 "" ""  1 0 0 1 0 1 N {0,0,255}
0 0 0 0 0 0 0 0
0 "powerY" "System1:PAC_BeamServer_power000_y." 0 2 0 0 0 E
E
1 0 0 3 2
1
LANG:1 1 Y
1
LANG:1 1 ?
1 "" ""  1 0 0 1 0 1 N {255,0,0}
0 0 0 0 0 0 0 0
0 
E 1 0 0 0 10 1 20 300
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  100 
N {0,0,0} 0 0 1 0 1 150 1 5 5 1 2
0
13 77
"ButtonOpenTrendForm"
""
1 650 580 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
123 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  650 580 690 604

T 
1
LANG:1 4 Zoom
"main()
{
  EP_childPanelOn();
}

EP_childPanelOn()
{
  ChildPanelOnCentral(\"StatisticsTrend.pnl\",\"Subband statistics for \"+$VTNAME+\"_\"+$BFNAME,
    makeDynString(\"$BFNAME:\" + $BFNAME, 
                                \"$SRGNAME:\" + $SRGNAME, 
                                \"$VTNAME:\" + $VTNAME, 
                                \"$SUBBANDSTART:\" + SpinButtonSubbandStatistics.sbMinimum, 
                                \"$SUBBANDEND:\" + SpinButtonSubbandStatistics.sbMaximum,
                                \"$SUBBANDCURRENT:\" + SpinButtonSubbandStatistics.text));


}
" 0
 E E E
2 78
"Text15"
""
1 399 134 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
145 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 532 262 686 277
0 2 0 "s" 0 0 0 192 0 0  532 262 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 17 Current direction
14 81
"TextFieldDirectionAngle1To"
""
1 231.2422360248448 312 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
151 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  230 310 330 337
3 "s" 0 0 0 0 0 -1  E "main()
{
  setValue(\"\",\"text\",\"0.0\");
}" 0
 E
14 83
"TextFieldDirectionAngle2To"
""
1 231.2422360248448 342 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
155 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  230 340 330 367
3 "s" 0 0 0 0 0 -1  E "main()
{
  setValue(\"\",\"text\",\"0.0\");
}" 0
 E
2 84
"Text9"
""
1 27 232 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
157 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 180 290 299 305
0 2 0 "s" 0 0 0 192 0 0  180 290 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 6 (From)
2 86
"Text9"
""
1 -21 224 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
161 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 230 290 349 305
0 2 0 "s" 0 0 0 192 0 0  230 290 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 2 To
2 87
"Text15"
""
1 389 204 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
163 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 70 260 224 275
0 2 0 "s" 0 0 0 192 0 0  70 260 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 4 Type
14 88
"TextFieldDirectionSweepTime"
""
1 321.8819875776398 262 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
165 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  321 260 392 287
3 "s" 0 0 0 0 0 -1  E "main()
{
  setValue(\"\",\"text\",\"60.0\");
}" 0
 E
2 89
"Text9"
""
1 40 184 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
167 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 325 246 444 261
0 2 0 "s" 0 0 0 192 0 0  325 246 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 14 Sweep time (s)
4 90
"Line1"
""
1 10 410 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
169 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E  680 410 10 410
2 92
"Text11"
""
1 -460 396 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
204 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 42 626 105 641
0 2 0 "s" 0 0 0 192 0 0  42 626 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 10 Last block
14 93
"TextFieldSubbandStatisticsLastBlock"
""
1 107.304347826087 622 E E E 1 E 1 E N "_WindowText" E N "_InputFieldBackground" E E
 E E
206 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  106 620 211 647
2 "s" 0 0 0 0 0 -1  E E E
27 94
"BarTrendPowerX"
""
1 10 680 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
361 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  10 680 340 810
2 -0.5 16 1 0 "%H:%M" 0 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  0 3 0 1 0 1 N {0,0,0}
0 0 10000 1000 2 "%H:%M" 0 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  0 3 0 1 0 1 N {0,0,0}
1 0 0 20 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  3 0 1 0 1 N {0,0,0}
0 0 1 0 1 N {0,0,0} 2 5 1 0 20 20 N {0,0,255} N {0,0,255} N {0,0,255} 1 -0.5 1
E
27 95
"BarTrendPowerY"
""
1 360 680 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
306 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  360 680 690 810
2 -0.5 16 1 0 "%H:%M" 0 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  0 3 0 1 0 1 N {0,0,0}
0 0 10000 1000 2 "%H:%M" 0 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  0 3 0 1 0 1 N {0,0,0}
1 0 0 20 1
LANG:1 61 -adobe-helvetica-medium-r-normal-*-*-80-100-100-*-*-iso8859-1
0
""  3 0 1 0 1 N {0,0,0}
0 0 1 0 1 N {0,0,0} 2 5 1 0 20 0 N {0,0,255} N {0,0,255} N {0,0,255} 1 -0.5 1
E
2 96
"Text8"
""
1 21 776 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
242 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 22 822 120 837
0 2 0 "s" 0 0 0 192 0 0  22 822 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 36 Power per subband in the X-direction
2 97
"Text8"
""
1 359 214 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
244 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 372 822 470 837
0 2 0 "s" 0 0 0 192 0 0  372 822 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 36 Power per subband in the Y-direction
19 98
"RadioBoxSweep"
""
1 340 300 E E E 1 E 1 E N "_3DText" E N "_3DFace" E E
 E E
338 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  340 300 448 404
4
T 
1
LANG:1 5 Fixed

1 
1
LANG:1 0 
E E
0 0 0 0 0
T 
1
LANG:1 14 Straight sweep

0 
1
LANG:1 0 
E E
0 0 0 0 0
T 
1
LANG:1 10 Sine sweep

0 
1
LANG:1 0 
E E
0 0 0 0 0
T 
1
LANG:1 12 Cosine sweep

0 
1
LANG:1 0 
E E
0 0 0 0 0
1
"main()
{
dyn_errClass err;

  while(true)
  {
    double angle1From=TextFieldDirectionAngle1.text;
    double angle2From=TextFieldDirectionAngle2.text;
    double angle1To=TextFieldDirectionAngle1To.text;
    double angle2To=TextFieldDirectionAngle2To.text;
    double sweepTime=TextFieldDirectionSweepTime.text;
    double updateRate=TextFieldDirectionSweepUpdateRate.text;
    double currentAngle1=angle1From;
    double currentAngle2=angle2From;
    double currentRad1=0.0;
    double currentRad2=0.0;
    double sweepDirectionAngle1=1.0;
    double sweepDirectionAngle2=1.0;
    double incrementAngle1;
    double incrementAngle2;
    bool stopSweep=false;
    int selectedSweep=RadioBoxSweep.number();
    double delayCounter=0.0;
    
    if(updateRate < 1.0)
    {
      updateRate=1.0;
    }
    
    if(selectedSweep==0)
    {
      delay(1); // sleep one second
    }
    else
    {
      if(angle1From>angle1To)
      {
        double tempAngle=angle1From;
        angle1From=angle1To;
        angle1To=tempAngle;
      }
    
      if(angle2From>angle2To)
      {
        double tempAngle=angle2From;
        angle2From=angle2To;
        angle2To=tempAngle;
      }      
      incrementAngle1=(angle1To-angle1From)  / (sweepTime/updateRate);
      incrementAngle2=(angle2To-angle2From)  / (sweepTime/updateRate);
      if(selectedSweep==2 || selectedSweep==3) // sine or cosine
      {
        incrementAngle1=4*asin(1)  / (sweepTime/updateRate);
        incrementAngle2=4*asin(1)  / (sweepTime/updateRate);
      }
      
      dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionType.:_original.._value\",ComboBoxDirectionType.text);
//      dpSetWait(\"System1:PAC_VT1_BF1_directionType.:_original.._value\",ComboBoxDirectionType.text);
      err = getLastError();
      if (dynlen(err) > 0)
      {
        stopSweep=true;
        RadioBoxSweep.number(0);
        errorDialog(err);
      }
   
      while(!stopSweep)
      {
        double tempAngle1=calcNewAngle(selectedSweep,currentAngle1,sweepDirectionAngle1,incrementAngle1,angle1From,angle1To,currentRad1);
        double tempAngle2=calcNewAngle(selectedSweep,currentAngle2,sweepDirectionAngle2,incrementAngle2,angle2From,angle2To,currentRad2);
        if(tempAngle1>=angle1To || tempAngle1<=angle1From)
        {
          sweepDirectionAngle1=sweepDirectionAngle1*(-1.0);
          tempAngle1=calcNewAngle(selectedSweep,currentAngle1,sweepDirectionAngle1,incrementAngle1,angle1From,angle1To,currentRad1);
        }
        if(tempAngle2>=angle2To || tempAngle2<=angle2From)
        {
          sweepDirectionAngle2=sweepDirectionAngle2*(-1.0);
          tempAngle2=calcNewAngle(selectedSweep,currentAngle2,sweepDirectionAngle2,incrementAngle2,angle2From,angle2To,currentRad2);
        }
        currentAngle1=tempAngle1;
        currentAngle2=tempAngle2;
        currentRad1=currentRad1+sweepDirectionAngle1*incrementAngle1;
        currentRad2=currentRad2+sweepDirectionAngle2*incrementAngle2;
      
        dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle1.:_original.._value\",currentAngle1);
//        dpSetWait(\"System1:PAC_VT1_BF1_directionAngle1.:_original.._value\",currentAngle1);
        err = getLastError();
        if (dynlen(err) > 0)
        {
          stopSweep=true;
          RadioBoxSweep.number(0);
          errorDialog(err);
        }  
 
        dpSetWait(\"System1:PAC_\"+$VTNAME+\"_\"+$BFNAME+\"_directionAngle2.:_original.._value\",currentAngle2);
//        dpSetWait(\"System1:PAC_VT1_BF1_directionAngle2.:_original.._value\",currentAngle2);
        err = getLastError();
        if (dynlen(err) > 0)
        { 
          stopSweep=true;
          RadioBoxSweep.number(0);
          errorDialog(err);
        }

        if(!stopSweep)
        {
          delayCounter=0.0;
          while((delayCounter < updateRate) && !stopSweep)
          {
            delay(1);
            delayCounter = delayCounter + 1.0;
            stopSweep=(RadioBoxSweep.number() != selectedSweep);
          }
        }
      }
    }
  }
}

double calcNewAngle(int sweep, double currentAngle,double direction,double increment, double angleFrom, double angleTo, double currentRad)
{
  double tempAngle=currentAngle;
  if(sweep==1) // straight
  {
    tempAngle=currentAngle+direction*increment;
  }
  else if(sweep==2) // sine
  {
    tempAngle=((angleTo-angleFrom)/2)*sin(currentRad+direction*increment)+angleFrom+(angleTo-angleFrom)/2;
  }
  else if(sweep==3) // cosine
  {
    tempAngle=((angleTo-angleFrom)/2)*cos(currentRad+direction*increment)+angleFrom+(angleTo-angleFrom)/2;
  }
  return tempAngle;
}
" 0
 E14 99
"TextFieldDirectionSweepUpdateRate"
""
1 421.8944099378882 262 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
354 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  421 260 493 287
3 "s" 0 0 0 0 0 -1  E "main()
{
  setValue(\"\",\"text\",\"20.0\");
}" 0
 E
2 100
"Text9"
""
1 39 175 E E E 1 E 1 E N {0,0,0} E N "_Transparent" E E
 E E
356 0 0 0 0 0
E E E
0
1
LANG:1 0 

1
"dashclr"N "_Transparent"
E E 0 1 1 0 1 E U  0 E 424 246 543 261
0 2 0 "s" 0 0 0 192 0 0  424 246 1
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
"" 1
LANG:1 12 Update every
21 101
"SpinButtonScheduleId"
""
1 70 180 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
365 0 0 0 0 0
E E E
0
1
LANG:1 0 

0
1
LANG:1 60 -adobe-helvetica-medium-r-normal-*-*-120-75-75-*-*-iso8859-1
0
""  70 180 137 207
0

E
E
E

N 0 10000 1 0 1 1
0
LAYER, 1 
1
LANG:1 6 Layer2
0
LAYER, 2 
1
LANG:1 6 Layer3
0
LAYER, 3 
1
LANG:1 6 Layer4
0
LAYER, 4 
1
LANG:1 6 Layer5
0
LAYER, 5 
1
LANG:1 6 Layer6
0
LAYER, 6 
1
LANG:1 6 Layer7
0
LAYER, 7 
1
LANG:1 6 Layer8
0
0